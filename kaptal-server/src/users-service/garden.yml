kind: Module
name: users-service
type: container
services:
  - name: users-service
    ports:
      - name: http
        containerPort: 3002
        servicePort: 3002
    ingresses:
     - path: /
       port: http
       hostname: users.${var.base-hostname}
    devMode:
      command: [npm, start] # Overrides the container's default when the service is deployed in dev mode
      sync:
        # Source/target configuration for dev mode is the same as for hot reloading.
        - source: src
          target: /app/src
          # Make sure to specify any paths that should not be synced!
          exclude: [node_modules]
          mode: two-way
    dependencies:
      - redis
